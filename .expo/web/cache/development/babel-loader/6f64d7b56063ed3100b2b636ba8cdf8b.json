{"ast":null,"code":"import _regeneratorRuntime from \"@babel/runtime/regenerator\";\nimport _extends from \"@babel/runtime/helpers/extends\";\nimport _toConsumableArray from \"@babel/runtime/helpers/toConsumableArray\";\nimport _slicedToArray from \"@babel/runtime/helpers/slicedToArray\";\nvar _jsxFileName = \"/Users/Justas/Desktop/kats/components/kats-overview/kats-overview.component.jsx\";\nimport React, { useState, useEffect } from 'react';\nimport { connect } from 'react-redux';\nimport { createStructuredSelector } from 'reselect';\nimport { v4 as uuidv4 } from 'uuid';\nimport axios from \"axios\";\nimport { useSelector } from \"react-redux\";\nimport KatsItem from \"../kats-item/kats-item.component\";\nimport { useName } from \"../../hooks/useName.jsx\";\nimport Button from \"react-native-web/dist/exports/Button\";\nimport View from \"react-native-web/dist/exports/View\";\nimport StyleSheet from \"react-native-web/dist/exports/StyleSheet\";\nimport Text from \"react-native-web/dist/exports/Text\";\nimport { uploadCats as _uploadCats } from \"../../redux/kats/kats.actions\";\nimport { filterCats as _filterCats } from \"../../redux/kats/kats.actions\";\nvar styles = StyleSheet.create({\n  container: {\n    paddingTop: 0,\n    height: 600\n  },\n  individual: {}\n});\n\nfunction KatsOverview(_ref) {\n  var _this = this;\n\n  var uploadCats = _ref.uploadCats,\n      katImages = _ref.katImages,\n      filterCats = _ref.filterCats;\n\n  var _useState = useState([]),\n      _useState2 = _slicedToArray(_useState, 2),\n      kats = _useState2[0],\n      setKats = _useState2[1];\n\n  var katsImages = useSelector(function (state) {\n    return state.kats.katsList;\n  });\n  var katsCount = useSelector(function (state) {\n    return state.kats.count;\n  });\n  useEffect(function () {\n    getCats();\n  }, []);\n  useEffect(function () {\n    var result = _toConsumableArray(katsImages);\n\n    if (priceFilter) {\n      result = result.filter(function (bicycle) {\n        return bicycle.item.price >= priceFilter[0] && bicycle.item.price <= priceFilter[1];\n      });\n    }\n\n    if (manufacturerFilter) {\n      result = result.filter(function (bicycle) {\n        return bicycle.item.manufacturer.split(\",\").some(function (key) {\n          return manufacturerFilter.includes(key);\n        });\n      });\n    }\n\n    if (countryFilter) {\n      result = result.filter(function (bicycle) {\n        return bicycle.country.split(\",\").some(function (key) {\n          return countryFilter.includes(key);\n        });\n      });\n    }\n\n    if (regionFilter) {\n      result = result.filter(function (bicycle) {\n        return bicycle.region.split(\",\").some(function (key) {\n          return regionFilter.includes(key);\n        });\n      });\n    }\n\n    setFilteredBicycles(result);\n  }, [bicycles, priceFilter, manufacturerFilter, countryFilter, regionFilter]);\n\n  var _useName = useName(),\n      names = _useName.names;\n\n  var getCats = function getCats() {\n    var catMap, maxItter, max, value, up;\n    return _regeneratorRuntime.async(function getCats$(_context) {\n      while (1) {\n        switch (_context.prev = _context.next) {\n          case 0:\n            catMap = [];\n            maxItter = 100;\n            max = 16;\n            value = 0;\n            up = true;\n\n          case 5:\n            _context.prev = 5;\n            _context.next = 8;\n            return _regeneratorRuntime.awrap(axios.get(\"http://placekitten.com/200/300?image=\" + value, {\n              responseType: 'blob'\n            }).then(function (res) {\n              var cat = _extends({}, {\n                preview: res.config.url,\n                id: uuidv4()\n              });\n\n              catMap.push(cat);\n            }));\n\n          case 8:\n            maxItter--;\n\n            if (up == true && value <= max) {\n              value++;\n\n              if (value == max) {\n                up = false;\n              }\n            } else {\n              up = false;\n              value--;\n\n              if (value == 0) {\n                up = true;\n              }\n            }\n\n            _context.next = 15;\n            break;\n\n          case 12:\n            _context.prev = 12;\n            _context.t0 = _context[\"catch\"](5);\n            console.log(_context.t0);\n\n          case 15:\n            if (maxItter > 0) {\n              _context.next = 5;\n              break;\n            }\n\n          case 16:\n            setTimeout(function () {\n              console.log('aa');\n            }, 2000);\n            uploadCats(catMap);\n\n          case 18:\n          case \"end\":\n            return _context.stop();\n        }\n      }\n    }, null, null, [[5, 12]], Promise);\n  };\n\n  var katName = names.map(function (name, index) {\n    return React.createElement(Text, {\n      key: index,\n      __self: _this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 130,\n        columnNumber: 3\n      }\n    }, name);\n  });\n  return React.createElement(View, {\n    style: styles.container,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 136,\n      columnNumber: 3\n    }\n  }, React.createElement(View, {\n    style: {\n      flexDirection: 'row',\n      flexWrap: 'wrap',\n      height: 150,\n      margin: 20,\n      width: 100\n    },\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 137,\n      columnNumber: 7\n    }\n  }, React.createElement(Button, {\n    onPress: function onPress() {\n      return filterCats(30);\n    },\n    title: \"30\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 138,\n      columnNumber: 11\n    }\n  }), React.createElement(Button, {\n    onPress: function onPress() {\n      return filterCats(50);\n    },\n    title: \"50\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 142,\n      columnNumber: 11\n    }\n  }), React.createElement(Button, {\n    onPress: function onPress() {\n      return filterCats(100);\n    },\n    title: \"100\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 146,\n      columnNumber: 11\n    }\n  })), katsImages.map(function (item, index) {\n    return React.createElement(View, {\n      style: styles.individual,\n      __self: _this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 153,\n        columnNumber: 11\n      }\n    }, React.createElement(KatsItem, {\n      key: item.id,\n      id: index,\n      names: katName[index],\n      preview: item.preview,\n      __self: _this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 154,\n        columnNumber: 11\n      }\n    }));\n  }));\n}\n\nvar mapDispatchToProps = function mapDispatchToProps(dispatch) {\n  return {\n    uploadCats: function uploadCats(catArr) {\n      return dispatch(_uploadCats(catArr));\n    },\n    filterCats: function filterCats(count) {\n      return dispatch(_filterCats(count));\n    }\n  };\n};\n\nexport default connect(null, mapDispatchToProps)(KatsOverview);","map":{"version":3,"sources":["/Users/Justas/Desktop/kats/components/kats-overview/kats-overview.component.jsx"],"names":["React","useState","useEffect","connect","createStructuredSelector","v4","uuidv4","axios","useSelector","KatsItem","useName","uploadCats","filterCats","styles","StyleSheet","create","container","paddingTop","height","individual","KatsOverview","katImages","kats","setKats","katsImages","state","katsList","katsCount","count","getCats","result","priceFilter","filter","bicycle","item","price","manufacturerFilter","manufacturer","split","some","key","includes","countryFilter","country","regionFilter","region","setFilteredBicycles","bicycles","names","catMap","maxItter","max","value","up","get","responseType","then","res","cat","preview","config","url","id","push","console","log","setTimeout","katName","map","name","index","flexDirection","flexWrap","margin","width","mapDispatchToProps","dispatch","catArr"],"mappings":"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","sourcesContent":["import React, {useState, useEffect} from 'react'\nimport { connect } from 'react-redux';\nimport { createStructuredSelector } from 'reselect';\n\nimport { v4 as uuidv4 } from 'uuid';\n\nimport axios from \"axios\";\n\nimport { useSelector } from \"react-redux\";\n\nimport KatsItem from '../kats-item/kats-item.component'\n\nimport { useName } from '../../hooks/useName.jsx'\n\nimport { Button, View, StyleSheet, Text } from 'react-native';\n\nimport {uploadCats} from '../../redux/kats/kats.actions';\nimport { filterCats } from '../../redux/kats/kats.actions'\n\n\nconst styles = StyleSheet.create({\n  container: {\n    paddingTop: 0,\n    height:600,\n  }, individual: {\n    \n  },\n});\n\n\nfunction KatsOverview({uploadCats, katImages, filterCats}) {\n\n  const [kats, setKats] = useState([])\n\n  const katsImages = useSelector(state => state.kats.katsList)\n  const katsCount = useSelector(state => state.kats.count)\n\n  useEffect(() => {\n  getCats();\n\n}, [])\n\n  useEffect(() => {\n\n    let result = [...katsImages];\n\n      if (priceFilter) {\n      result = result.filter(bicycle => bicycle.item.price\n            >= priceFilter[0] && bicycle.item.price <= priceFilter[1])\n      }\n      if(manufacturerFilter) {\n        result = result.filter(bicycle => bicycle.item.manufacturer\n          .split(\",\")\n            .some(key => manufacturerFilter.includes(key))) \n      }\n      if(countryFilter) {\n        result = result.filter(bicycle => bicycle.country\n            .split(\",\")\n              .some(key => countryFilter.includes(key))\n          ) \n      }\n      if (regionFilter) {\n          result = result.filter(bicycle => bicycle.region\n            .split(\",\")\n              .some(key => regionFilter.includes(key)))\n        }\n      setFilteredBicycles(result);\n\n  }, [bicycles, priceFilter, manufacturerFilter, countryFilter, regionFilter])\n\n\n  //getting names\n  const { names } = useName();\n\n  const getCats = async () => {\n\n  let catMap = [];\n  let maxItter = 100;\n\n  //random images\n  let max = 16\n  let value = 0\n  let up = true\n\n  do {\n    try {\n\n  await axios.get(`http://placekitten.com/200/300?image=${value}`, {\n    responseType: 'blob'\n  })\n   .then(res => {\n      let cat = Object.assign({}, {\n                  preview: res.config.url,\n                  id: uuidv4()\n              }\n        )\n      catMap.push(cat)\n     })\n      maxItter--\n\n      if (up == true && value <= max) {\n       value++\n\n      if (value == max) {\n        up = false;\n      }\n    }  else {\n        up = false\n        value--;\n\n      if (value == 0) {\n        up = true;\n        }\n      }\n      \n    } catch (error) {\n      console.log(error)\n    }\n  }\n  while (maxItter > 0);\n  setTimeout(function() {\n      console.log('aa')\n    }, 2000);\n  uploadCats(catMap);\n}\n\n\n\nlet katName = names.map((name, index) => \n  <Text key={index}>\n    {name}  \n  </Text>\n  )\n\n\treturn (\n\t\t<View style={styles.container}>\n      <View style={{flexDirection:'row', flexWrap:'wrap', height: 150, margin: 20, width: 100}}>\n          <Button\n            onPress={() => filterCats(30)}\n            title=\"30\"\n          />\n          <Button\n            onPress={() => filterCats(50)}\n            title=\"50\"\n          />\n          <Button\n            onPress={() => filterCats(100)}\n            title=\"100\"\n          />\n        </View>\n        { \n        katsImages.map((item, index) => (\n          <View style={styles.individual}>\n          <KatsItem\n              key={item.id}\n              id={index}\n              names={katName[index]}\n              preview={item.preview}\n          \n            />\n            </View> \n          ))\n        }\n    \t</View>\n\t\t)\n}\n\nconst mapDispatchToProps = dispatch => ({\n  uploadCats: (catArr) => dispatch(uploadCats(catArr)),\n  filterCats: (count) => dispatch(filterCats(count))\n})\n\nexport default connect(null, mapDispatchToProps)(KatsOverview);\n"]},"metadata":{},"sourceType":"module"}