{"ast":null,"code":"import _regeneratorRuntime from \"@babel/runtime/regenerator\";\nimport _extends from \"@babel/runtime/helpers/extends\";\nimport _toConsumableArray from \"@babel/runtime/helpers/toConsumableArray\";\nimport _slicedToArray from \"@babel/runtime/helpers/slicedToArray\";\nvar _jsxFileName = \"/Users/Justas/Desktop/kats/components/kats-overview/kats-overview.component.jsx\";\nimport React, { useState, useEffect } from 'react';\nimport { connect } from 'react-redux';\nimport { createStructuredSelector } from 'reselect';\nimport { v4 as uuidv4 } from 'uuid';\nimport 'react-native-get-random-values';\nimport axios from \"axios\";\nimport { useSelector } from \"react-redux\";\nimport KatsItem from \"../kats-item/kats-item.component\";\nimport { useName } from \"../../hooks/useName.jsx\";\nimport Button from \"react-native-web/dist/exports/Button\";\nimport View from \"react-native-web/dist/exports/View\";\nimport StyleSheet from \"react-native-web/dist/exports/StyleSheet\";\nimport Text from \"react-native-web/dist/exports/Text\";\nimport FlatList from \"react-native-web/dist/exports/FlatList\";\nimport { uploadCats as _uploadCats } from \"../../redux/kats/kats.actions\";\nimport { filterCats as _filterCats } from \"../../redux/kats/kats.actions\";\nimport { selectKatsList } from \"../../redux/kats/kats.selectors\";\nvar styles = StyleSheet.create({\n  container: {\n    paddingTop: 0,\n    height: 670\n  },\n  redbox: {\n    width: 100,\n    height: 100,\n    backgroundColor: 'red'\n  },\n  bluebox: {\n    width: 100,\n    height: 100,\n    backgroundColor: 'blue'\n  },\n  blackbox: {\n    width: 100,\n    height: 100,\n    backgroundColor: 'black'\n  }\n});\n\nfunction KatsOverview(_ref) {\n  var _this = this;\n\n  var uploadCats = _ref.uploadCats,\n      katImages = _ref.katImages,\n      filterCats = _ref.filterCats,\n      navigation = _ref.navigation;\n\n  var _useState = useState([]),\n      _useState2 = _slicedToArray(_useState, 2),\n      kats = _useState2[0],\n      setKats = _useState2[1];\n\n  var _useState3 = useState([]),\n      _useState4 = _slicedToArray(_useState3, 2),\n      katFilter = _useState4[0],\n      setKatFilter = _useState4[1];\n\n  var CancelToken = axios.CancelToken;\n  var source = CancelToken.source();\n  var katsImages = useSelector(function (state) {\n    return state.kats.katsList;\n  });\n  var katsCount = useSelector(function (state) {\n    return state.kats.count;\n  });\n  useEffect(function () {\n    getCats();\n    return function () {\n      source.cancel();\n    };\n  }, []);\n  useEffect(function () {\n    var result = _toConsumableArray(katsImages);\n\n    if (katsCount) {\n      result = result.slice(0, katsCount);\n    }\n\n    setKatFilter(result);\n  }, [katsImages, katsCount]);\n\n  var _useName = useName(kats),\n      names = _useName.names;\n\n  var getCats = function getCats() {\n    var catMap, maxItter, max, value, up, obj;\n    return _regeneratorRuntime.async(function getCats$(_context) {\n      while (1) {\n        switch (_context.prev = _context.next) {\n          case 0:\n            catMap = [];\n            maxItter = 100;\n            max = 16;\n            value = 0;\n            up = true;\n\n          case 5:\n            _context.prev = 5;\n            _context.next = 8;\n            return _regeneratorRuntime.awrap(axios.get(\"http://placekitten.com/200/300?image=\" + value, {\n              cancelToken: source.token\n            }).then(function (res) {\n              var cat = _extends({}, {\n                preview: res.config.url,\n                id: uuidv4()\n              });\n\n              catMap.push(cat);\n            }));\n\n          case 8:\n            maxItter--;\n\n            if (up == true && value <= max) {\n              value++;\n\n              if (value == max) {\n                up = false;\n              }\n            } else {\n              up = false;\n              value--;\n\n              if (value == 0) {\n                up = true;\n              }\n            }\n\n            _context.next = 16;\n            break;\n\n          case 12:\n            _context.prev = 12;\n            _context.t0 = _context[\"catch\"](5);\n            console.log(_context.t0);\n            throw _context.t0;\n\n          case 16:\n            if (maxItter > 0) {\n              _context.next = 5;\n              break;\n            }\n\n          case 17:\n            obj = kats.map(function (item, i) {\n              return _extends({}, item, catMap[i]);\n            });\n            setTimeout(function () {\n              console.log('aa');\n            }, 2000);\n            uploadCats(obj);\n\n          case 20:\n          case \"end\":\n            return _context.stop();\n        }\n      }\n    }, null, null, [[5, 12]], Promise);\n  };\n\n  return React.createElement(View, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 137,\n      columnNumber: 3\n    }\n  }, React.createElement(View, {\n    style: {\n      flex: '1',\n      flexDirection: 'row',\n      justifyContent: 'space-between',\n      height: 150,\n      margin: 20,\n      width: 100\n    },\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 138,\n      columnNumber: 7\n    }\n  }, React.createElement(Button, {\n    style: styles.redbox,\n    onPress: function onPress() {\n      return filterCats(30);\n    },\n    title: \"30\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 140,\n      columnNumber: 11\n    }\n  }), React.createElement(Button, {\n    style: styles.blackbox,\n    onPress: function onPress() {\n      return filterCats(50);\n    },\n    title: \"50\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 145,\n      columnNumber: 11\n    }\n  }), React.createElement(Button, {\n    style: styles.bluebox,\n    onPress: function onPress() {\n      return filterCats(100);\n    },\n    title: \"100\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 150,\n      columnNumber: 11\n    }\n  })), React.createElement(View, {\n    style: styles.container,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 156,\n      columnNumber: 8\n    }\n  }, React.createElement(FlatList, {\n    style: {\n      flex: 1\n    },\n    data: katFilter,\n    renderItem: function renderItem(_ref2) {\n      var item = _ref2.item;\n      return React.createElement(KatsItem, {\n        item: item,\n        navigation: navigation,\n        __self: _this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 160,\n          columnNumber: 35\n        }\n      });\n    },\n    keyExtractor: function keyExtractor(item) {\n      return item.id;\n    },\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 157,\n      columnNumber: 9\n    }\n  })));\n}\n\nvar mapDispatchToProps = function mapDispatchToProps(dispatch) {\n  return {\n    uploadCats: function uploadCats(catArr) {\n      return dispatch(_uploadCats(catArr));\n    },\n    filterCats: function filterCats(count) {\n      return dispatch(_filterCats(count));\n    }\n  };\n};\n\nvar mapStateToProps = function mapStateToProps(state) {\n  return {\n    katImages: selectKatsList(state)\n  };\n};\n\nexport default connect(null, mapDispatchToProps)(KatsOverview);","map":{"version":3,"sources":["/Users/Justas/Desktop/kats/components/kats-overview/kats-overview.component.jsx"],"names":["React","useState","useEffect","connect","createStructuredSelector","v4","uuidv4","axios","useSelector","KatsItem","useName","uploadCats","filterCats","selectKatsList","styles","StyleSheet","create","container","paddingTop","height","redbox","width","backgroundColor","bluebox","blackbox","KatsOverview","katImages","navigation","kats","setKats","katFilter","setKatFilter","CancelToken","source","katsImages","state","katsList","katsCount","count","getCats","cancel","result","slice","names","catMap","maxItter","max","value","up","get","cancelToken","token","then","res","cat","preview","config","url","id","push","console","log","obj","map","item","i","setTimeout","flex","flexDirection","justifyContent","margin","mapDispatchToProps","dispatch","catArr","mapStateToProps"],"mappings":";;;;;AAAA,OAAOA,KAAP,IAAeC,QAAf,EAAyBC,SAAzB,QAAyC,OAAzC;AACA,SAASC,OAAT,QAAwB,aAAxB;AACA,SAASC,wBAAT,QAAyC,UAAzC;AAEA,SAASC,EAAE,IAAIC,MAAf,QAA6B,MAA7B;AACA,OAAO,gCAAP;AAEA,OAAOC,KAAP,MAAkB,OAAlB;AAEA,SAASC,WAAT,QAA4B,aAA5B;AAEA,OAAOC,QAAP;AAEA,SAASC,OAAT;;;;;;AAIA,SAAQC,UAAU,IAAVA,WAAR;AACA,SAASC,UAAU,IAAVA,WAAT;AACA,SAASC,cAAT;AAGA,IAAMC,MAAM,GAAGC,UAAU,CAACC,MAAX,CAAkB;AAC/BC,EAAAA,SAAS,EAAE;AACTC,IAAAA,UAAU,EAAE,CADH;AAETC,IAAAA,MAAM,EAAC;AAFE,GADoB;AAI5BC,EAAAA,MAAM,EAAE;AACPC,IAAAA,KAAK,EAAE,GADA;AAEPF,IAAAA,MAAM,EAAE,GAFD;AAGPG,IAAAA,eAAe,EAAE;AAHV,GAJoB;AAS9BC,EAAAA,OAAO,EAAE;AACNF,IAAAA,KAAK,EAAE,GADD;AAENF,IAAAA,MAAM,EAAE,GAFF;AAGNG,IAAAA,eAAe,EAAE;AAHX,GATqB;AAc9BE,EAAAA,QAAQ,EAAE;AACPH,IAAAA,KAAK,EAAE,GADA;AAEPF,IAAAA,MAAM,EAAE,GAFD;AAGPG,IAAAA,eAAe,EAAE;AAHV;AAdoB,CAAlB,CAAf;;AAsBA,SAASG,YAAT,OAAuE;AAAA;;AAAA,MAAhDd,UAAgD,QAAhDA,UAAgD;AAAA,MAApCe,SAAoC,QAApCA,SAAoC;AAAA,MAAzBd,UAAyB,QAAzBA,UAAyB;AAAA,MAAbe,UAAa,QAAbA,UAAa;;AAAA,kBAE7C1B,QAAQ,CAAC,EAAD,CAFqC;AAAA;AAAA,MAE9D2B,IAF8D;AAAA,MAExDC,OAFwD;;AAAA,mBAInC5B,QAAQ,CAAC,EAAD,CAJ2B;AAAA;AAAA,MAI9D6B,SAJ8D;AAAA,MAInDC,YAJmD;;AAMrE,MAAMC,WAAW,GAAGzB,KAAK,CAACyB,WAA1B;AACA,MAAMC,MAAM,GAAGD,WAAW,CAACC,MAAZ,EAAf;AAEA,MAAMC,UAAU,GAAG1B,WAAW,CAAC,UAAA2B,KAAK;AAAA,WAAIA,KAAK,CAACP,IAAN,CAAWQ,QAAf;AAAA,GAAN,CAA9B;AACA,MAAMC,SAAS,GAAG7B,WAAW,CAAC,UAAA2B,KAAK;AAAA,WAAIA,KAAK,CAACP,IAAN,CAAWU,KAAf;AAAA,GAAN,CAA7B;AAEApC,EAAAA,SAAS,CAAC,YAAM;AAChBqC,IAAAA,OAAO;AACP,WAAO,YAAM;AACTN,MAAAA,MAAM,CAACO,MAAP;AACD,KAFH;AAGD,GALU,EAKR,EALQ,CAAT;AAOAtC,EAAAA,SAAS,CAAC,YAAM;AACd,QAAIuC,MAAM,sBAAOP,UAAP,CAAV;;AAEE,QAAIG,SAAJ,EAAe;AACfI,MAAAA,MAAM,GAAGA,MAAM,CAACC,KAAP,CAAa,CAAb,EAAgBL,SAAhB,CAAT;AACC;;AACDN,IAAAA,YAAY,CAACU,MAAD,CAAZ;AAEH,GARQ,EAQN,CAACP,UAAD,EAAaG,SAAb,CARM,CAAT;;AAnBqE,iBA+BnD3B,OAAO,CAACkB,IAAD,CA/B4C;AAAA,MA+B7De,KA/B6D,YA+B7DA,KA/B6D;;AAiCrE,MAAMJ,OAAO,GAAG,SAAVA,OAAU;AAAA;AAAA;AAAA;AAAA;AAAA;AAGZK,YAAAA,MAHY,GAGH,EAHG;AAIZC,YAAAA,QAJY,GAID,GAJC;AAOZC,YAAAA,GAPY,GAON,EAPM;AAQZC,YAAAA,KARY,GAQJ,CARI;AASZC,YAAAA,EATY,GASP,IATO;;AAAA;AAAA;AAAA;AAAA,6CAcVzC,KAAK,CAAC0C,GAAN,2CAAkDF,KAAlD,EAA2D;AAC/DG,cAAAA,WAAW,EAAEjB,MAAM,CAACkB;AAD2C,aAA3D,EAGJC,IAHI,CAGC,UAAAC,GAAG,EAAI;AACV,kBAAIC,GAAG,GAAG,SAAc,EAAd,EAAkB;AAChBC,gBAAAA,OAAO,EAAEF,GAAG,CAACG,MAAJ,CAAWC,GADJ;AAEhBC,gBAAAA,EAAE,EAAEpD,MAAM;AAFM,eAAlB,CAAV;;AAKAsC,cAAAA,MAAM,CAACe,IAAP,CAAYL,GAAZ;AACA,aAVE,CAdU;;AAAA;AAyBZT,YAAAA,QAAQ;;AAER,gBAAIG,EAAE,IAAI,IAAN,IAAcD,KAAK,IAAID,GAA3B,EAAgC;AAC/BC,cAAAA,KAAK;;AAEN,kBAAIA,KAAK,IAAID,GAAb,EAAkB;AAChBE,gBAAAA,EAAE,GAAG,KAAL;AACD;AACF,aANC,MAMM;AACJA,cAAAA,EAAE,GAAG,KAAL;AACAD,cAAAA,KAAK;;AAEP,kBAAIA,KAAK,IAAI,CAAb,EAAgB;AACdC,gBAAAA,EAAE,GAAG,IAAL;AACC;AACF;;AAxCW;AAAA;;AAAA;AAAA;AAAA;AA2CZY,YAAAA,OAAO,CAACC,GAAR;AA3CY;;AAAA;AAAA,gBA+CThB,QAAQ,GAAG,CA/CF;AAAA;AAAA;AAAA;;AAAA;AAiDViB,YAAAA,GAjDU,GAiDJlC,IAAI,CAACmC,GAAL,CAAS,UAACC,IAAD,EAAOC,CAAP;AAAA,qBAAa,SAAc,EAAd,EAAkBD,IAAlB,EAAwBpB,MAAM,CAACqB,CAAD,CAA9B,CAAb;AAAA,aAAT,CAjDI;AAmDhBC,YAAAA,UAAU,CAAC,YAAW;AAClBN,cAAAA,OAAO,CAACC,GAAR,CAAY,IAAZ;AACD,aAFO,EAEL,IAFK,CAAV;AAGAlD,YAAAA,UAAU,CAACmD,GAAD,CAAV;;AAtDgB;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,GAAhB;;AA0DD,SACC,oBAAC,IAAD;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,KACI,oBAAC,IAAD;AAAM,IAAA,KAAK,EAAE;AAACK,MAAAA,IAAI,EAAC,GAAN;AAAWC,MAAAA,aAAa,EAAE,KAA1B;AACbC,MAAAA,cAAc,EAAE,eADH;AACoBlD,MAAAA,MAAM,EAAE,GAD5B;AACiCmD,MAAAA,MAAM,EAAE,EADzC;AAC6CjD,MAAAA,KAAK,EAAE;AADpD,KAAb;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,KAEI,oBAAC,MAAD;AACA,IAAA,KAAK,EAAEP,MAAM,CAACM,MADd;AAEE,IAAA,OAAO,EAAE;AAAA,aAAMR,UAAU,CAAC,EAAD,CAAhB;AAAA,KAFX;AAGE,IAAA,KAAK,EAAC,IAHR;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,IAFJ,EAOI,oBAAC,MAAD;AACA,IAAA,KAAK,EAAEE,MAAM,CAACU,QADd;AAEE,IAAA,OAAO,EAAE;AAAA,aAAMZ,UAAU,CAAC,EAAD,CAAhB;AAAA,KAFX;AAGE,IAAA,KAAK,EAAC,IAHR;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,IAPJ,EAYI,oBAAC,MAAD;AACE,IAAA,KAAK,EAAEE,MAAM,CAACS,OADhB;AAEE,IAAA,OAAO,EAAE;AAAA,aAAMX,UAAU,CAAC,GAAD,CAAhB;AAAA,KAFX;AAGE,IAAA,KAAK,EAAC,KAHR;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,IAZJ,CADJ,EAmBK,oBAAC,IAAD;AAAM,IAAA,KAAK,EAAEE,MAAM,CAACG,SAApB;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,KACC,oBAAC,QAAD;AACE,IAAA,KAAK,EAAE;AAACkD,MAAAA,IAAI,EAAC;AAAN,KADT;AAEE,IAAA,IAAI,EAAErC,SAFR;AAGE,IAAA,UAAU,EAAE;AAAA,UAAEkC,IAAF,SAAEA,IAAF;AAAA,aAAY,oBAAC,QAAD;AAAU,QAAA,IAAI,EAAEA,IAAhB;AAAsB,QAAA,UAAU,EAAErC,UAAlC;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,QAAZ;AAAA,KAHd;AAIE,IAAA,YAAY,EAAE,sBAAAqC,IAAI;AAAA,aAAIA,IAAI,CAACN,EAAT;AAAA,KAJpB;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,IADD,CAnBL,CADD;AA8BA;;AAED,IAAMa,kBAAkB,GAAG,SAArBA,kBAAqB,CAAAC,QAAQ;AAAA,SAAK;AACtC7D,IAAAA,UAAU,EAAE,oBAAC8D,MAAD;AAAA,aAAYD,QAAQ,CAAC7D,WAAU,CAAC8D,MAAD,CAAX,CAApB;AAAA,KAD0B;AAEtC7D,IAAAA,UAAU,EAAE,oBAAC0B,KAAD;AAAA,aAAWkC,QAAQ,CAAC5D,WAAU,CAAC0B,KAAD,CAAX,CAAnB;AAAA;AAF0B,GAAL;AAAA,CAAnC;;AAKA,IAAMoC,eAAe,GAAG,SAAlBA,eAAkB,CAACvC,KAAD;AAAA,SAAY;AAClCT,IAAAA,SAAS,EAAEb,cAAc,CAACsB,KAAD;AADS,GAAZ;AAAA,CAAxB;;AAIA,eAAehC,OAAO,CAAC,IAAD,EAAOoE,kBAAP,CAAP,CAAkC9C,YAAlC,CAAf","sourcesContent":["import React, {useState, useEffect} from 'react'\nimport { connect } from 'react-redux';\nimport { createStructuredSelector } from 'reselect';\n\nimport { v4 as uuidv4 } from 'uuid';\nimport 'react-native-get-random-values'\n\nimport axios from \"axios\";\n\nimport { useSelector } from \"react-redux\";\n\nimport KatsItem from '../kats-item/kats-item.component'\n\nimport { useName } from '../../hooks/useName.jsx'\n\nimport { Button, View, StyleSheet, Text, FlatList } from 'react-native';\n\nimport {uploadCats} from '../../redux/kats/kats.actions';\nimport { filterCats } from '../../redux/kats/kats.actions'\nimport { selectKatsList } from '../../redux/kats/kats.selectors'\n\n\nconst styles = StyleSheet.create({\n  container: {\n    paddingTop: 0,\n    height:670,\n  }, redbox: {\n      width: 100,\n      height: 100,\n      backgroundColor: 'red'\n   },\n   bluebox: {\n      width: 100,\n      height: 100,\n      backgroundColor: 'blue'\n   },\n   blackbox: {\n      width: 100,\n      height: 100,\n      backgroundColor: 'black'\n   },\n});\n\n\nfunction KatsOverview({uploadCats, katImages, filterCats, navigation}) {\n\n  const [kats, setKats] = useState([])\n\n  const [katFilter, setKatFilter] = useState([])\n\n  const CancelToken = axios.CancelToken;\n  const source = CancelToken.source();\n\n  const katsImages = useSelector(state => state.kats.katsList)\n  const katsCount = useSelector(state => state.kats.count)\n\n  useEffect(() => {\n  getCats();\n  return () => {\n      source.cancel();\n    }\n}, [])\n\n  useEffect(() => {\n    let result = [...katsImages];\n\n      if (katsCount) {\n      result = result.slice(0, katsCount)\n      }\n      setKatFilter(result);\n\n  }, [katsImages, katsCount])\n\n\n  //getting names\n  const { names } = useName(kats);\n\n  const getCats = async () => {\n\n  // getting cats\n  let catMap = [];\n  let maxItter = 100;\n\n  //random images\n  let max = 16\n  let value = 0\n  let up = true\n\n  do {\n    try {\n\n  await axios.get(`http://placekitten.com/200/300?image=${value}`, {\n    cancelToken: source.token\n  })\n   .then(res => {\n      let cat = Object.assign({}, {\n                  preview: res.config.url,\n                  id: uuidv4(),\n              }\n        )\n      catMap.push(cat)\n     })\n      maxItter--\n\n      if (up == true && value <= max) {\n       value++\n\n      if (value == max) {\n        up = false;\n      }\n    }  else {\n        up = false\n        value--;\n\n      if (value == 0) {\n        up = true;\n        }\n      }\n      \n    } catch (error) {\n      console.log(error)\n      throw error;\n    }\n  }\n  while (maxItter > 0);\n\n  const obj = kats.map((item, i) => Object.assign({}, item, catMap[i]))\n\n  setTimeout(function() {\n      console.log('aa')\n    }, 2000);\n  uploadCats(obj);\n}\n\n\n\treturn (\n\t\t<View>\n      <View style={{flex:'1', flexDirection: 'row',\n      justifyContent: 'space-between', height: 150, margin: 20, width: 100}}>\n          <Button\n          style={styles.redbox}\n            onPress={() => filterCats(30)}\n            title=\"30\"\n          />\n          <Button\n          style={styles.blackbox}\n            onPress={() => filterCats(50)}\n            title=\"50\"\n          />\n          <Button\n            style={styles.bluebox}\n            onPress={() => filterCats(100)}\n            title=\"100\"\n          />\n      </View>\n       <View style={styles.container}>\n        <FlatList\n          style={{flex:1}}\n          data={katFilter}\n          renderItem={({item}) => <KatsItem item={item} navigation={navigation}/>}\n          keyExtractor={item => item.id}\n        />\n    \t</View>\n      </View>\n\t\t)\n}\n\nconst mapDispatchToProps = dispatch => ({\n  uploadCats: (catArr) => dispatch(uploadCats(catArr)),\n  filterCats: (count) => dispatch(filterCats(count))\n})\n\nconst mapStateToProps = (state) => ({\n  katImages: selectKatsList(state)\n})\n\nexport default connect(null, mapDispatchToProps)(KatsOverview);\n"]},"metadata":{},"sourceType":"module"}