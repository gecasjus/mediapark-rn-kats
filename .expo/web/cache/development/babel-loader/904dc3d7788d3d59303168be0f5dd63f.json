{"ast":null,"code":"import _regeneratorRuntime from \"@babel/runtime/regenerator\";\nimport _toConsumableArray from \"@babel/runtime/helpers/toConsumableArray\";\nimport { useEffect } from 'react';\nimport { useDispatch } from \"react-redux\";\nimport axios from \"axios\";\nimport { loadingCats } from \"../redux/kats/kats.actions\";\nexport var useName = function useName(kats) {\n  var dispatch = useDispatch();\n  var CancelToken = axios.CancelToken;\n  var source = CancelToken.source();\n\n  var getNames = function getNames() {\n    return _regeneratorRuntime.async(function getNames$(_context) {\n      while (1) {\n        switch (_context.prev = _context.next) {\n          case 0:\n            _context.prev = 0;\n            _context.next = 3;\n            return _regeneratorRuntime.awrap(axios.get('https://bikeindex.org/api/v3/manufacturers?page=1&per_page=100', {\n              cancelToken: source.token\n            }).then(function (res) {\n              var catnames = Object.values(res.data).map(function (res) {\n                return res.map(function (kitty) {\n                  return kitty.name;\n                });\n              });\n              var unnestedNames = catnames.flat();\n\n              var spread = _toConsumableArray(unnestedNames);\n\n              spread.map(function (item) {\n                kats.push({\n                  cat: item\n                });\n              });\n            }).catch(function (err) {\n              console.log('limited api requests(5 a day)');\n              console.log(err);\n            }));\n\n          case 3:\n            _context.next = 8;\n            break;\n\n          case 5:\n            _context.prev = 5;\n            _context.t0 = _context[\"catch\"](0);\n            throw _context.t0;\n\n          case 8:\n          case \"end\":\n            return _context.stop();\n        }\n      }\n    }, null, null, [[0, 5]], Promise);\n  };\n\n  useEffect(function () {\n    getNames();\n    dispatch(loadingCats());\n    return function () {\n      source.cancel();\n    };\n  }, []);\n};","map":{"version":3,"sources":["/Users/Justas/Desktop/kats/hooks/useName.js"],"names":["useEffect","useDispatch","axios","loadingCats","useName","kats","dispatch","CancelToken","source","getNames","get","cancelToken","token","then","res","catnames","Object","values","data","map","kitty","name","unnestedNames","flat","spread","item","push","cat","catch","err","console","log","cancel"],"mappings":";;AAAA,SAAQA,SAAR,QAAwB,OAAxB;AACA,SAASC,WAAT,QAA4B,aAA5B;AAEA,OAAOC,KAAP,MAAkB,OAAlB;AAEA,SAAQC,WAAR;AAEA,OAAO,IAAMC,OAAO,GAAG,SAAVA,OAAU,CAACC,IAAD,EAAU;AAE9B,MAAMC,QAAQ,GAAGL,WAAW,EAA5B;AAEA,MAAMM,WAAW,GAAGL,KAAK,CAACK,WAA1B;AACA,MAAMC,MAAM,GAAGD,WAAW,CAACC,MAAZ,EAAf;;AAEF,MAAMC,QAAQ,GAAG,SAAXA,QAAW;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,6CAGTP,KAAK,CAACQ,GAAN,CAAU,gEAAV,EAA4E;AAC/EC,cAAAA,WAAW,EAAEH,MAAM,CAACI;AAD2D,aAA5E,EAGLC,IAHK,CAGA,UAAAC,GAAG,EAAI;AACZ,kBAAIC,QAAQ,GAAGC,MAAM,CAACC,MAAP,CAAcH,GAAG,CAACI,IAAlB,EACXC,GADW,CACP,UAAAL,GAAG;AAAA,uBAAIA,GAAG,CACbK,GADU,CACN,UAAAC,KAAK;AAAA,yBAAIA,KAAK,CAACC,IAAV;AAAA,iBADC,CAAJ;AAAA,eADI,CAAf;AAGC,kBAAIC,aAAa,GAAGP,QAAQ,CAACQ,IAAT,EAApB;;AACA,kBAAIC,MAAM,sBAAOF,aAAP,CAAV;;AACAE,cAAAA,MAAM,CAACL,GAAP,CAAW,UAAAM,IAAI,EAAI;AAClBpB,gBAAAA,IAAI,CAACqB,IAAL,CAAU;AAACC,kBAAAA,GAAG,EAAEF;AAAN,iBAAV;AACA,eAFD;AAGA,aAZI,EAaJG,KAbI,CAaE,UAACC,GAAD,EAAS;AACjBC,cAAAA,OAAO,CAACC,GAAR,CAAY,+BAAZ;AACAD,cAAAA,OAAO,CAACC,GAAR,CAAYF,GAAZ;AACA,aAhBM,CAHS;;AAAA;AAAA;AAAA;;AAAA;AAAA;AAAA;AAAA;;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,GAAjB;;AAyBA7B,EAAAA,SAAS,CAAC,YAAM;AACfS,IAAAA,QAAQ;AACRH,IAAAA,QAAQ,CAACH,WAAW,EAAZ,CAAR;AACC,WAAO,YAAM;AACRK,MAAAA,MAAM,CAACwB,MAAP;AACH,KAFF;AAGD,GANQ,EAMN,EANM,CAAT;AAOA,CAvCM","sourcesContent":["import {useEffect} from 'react';\nimport { useDispatch } from \"react-redux\";\n\nimport axios from \"axios\";\n \nimport {loadingCats} from '../redux/kats/kats.actions'\n\nexport const useName = (kats) => {\n\n  \tconst dispatch = useDispatch();\n\n  \tconst CancelToken = axios.CancelToken;\n  \tconst source = CancelToken.source();\n\n\tconst getNames = async () => {\n\n\t\ttry {\n\t\t\tawait axios.get('https://bikeindex.org/api/v3/manufacturers?page=1&per_page=100', {\n\t\t    cancelToken: source.token\n\t\t  \t})\n\t\t\t.then(res => {\n\t\t\t\tlet catnames = Object.values(res.data)\n\t\t\t\t\t\t\t.map(res => res\n\t\t\t\t\t\t\t\t.map(kitty => kitty.name))\n\t\t\t\t\tlet unnestedNames = catnames.flat()\n\t\t\t\t\tlet spread = [...unnestedNames]\n\t\t\t\t\tspread.map(item => {\n\t\t\t\t\t\tkats.push({cat: item})\n\t\t\t\t\t})\n\t\t\t\t})\n\t\t\t\t.catch((err) => {\n\t\t\tconsole.log('limited api requests(5 a day)')\n\t\t\tconsole.log(err)\n\t\t})\n\t\t} catch (error) {\n\t\t\tthrow error\n\t\t}\n\t}\n\n\tuseEffect(() => {\n\t\tgetNames();\n\t\tdispatch(loadingCats());\n\t\t\treturn () => {\n\t      \tsource.cancel();\n    };\n\t}, [])\n}\n"]},"metadata":{},"sourceType":"module"}