{"ast":null,"code":"import _regeneratorRuntime from \"@babel/runtime/regenerator\";\nimport _extends from \"@babel/runtime/helpers/extends\";\nimport _toConsumableArray from \"@babel/runtime/helpers/toConsumableArray\";\nimport _slicedToArray from \"@babel/runtime/helpers/slicedToArray\";\nvar _jsxFileName = \"/Users/Justas/Desktop/kats/components/kats-overview/kats-overview.component.jsx\";\nimport React, { useState, useEffect } from 'react';\nimport Button from \"react-native-web/dist/exports/Button\";\nimport View from \"react-native-web/dist/exports/View\";\nimport StyleSheet from \"react-native-web/dist/exports/StyleSheet\";\nimport Text from \"react-native-web/dist/exports/Text\";\nimport FlatList from \"react-native-web/dist/exports/FlatList\";\nimport TouchableOpacity from \"react-native-web/dist/exports/TouchableOpacity\";\nimport TextInput from \"react-native-web/dist/exports/TextInput\";\nimport { connect } from 'react-redux';\nimport { createStructuredSelector } from 'reselect';\nimport { useSelector, useDispatch } from \"react-redux\";\nimport 'react-native-get-random-values';\nimport { v4 as uuidv4 } from 'uuid';\nimport axios from \"axios\";\nimport KatsItem from \"../kats-item/kats-item.component\";\nimport { useName } from \"../../hooks/useName.jsx\";\nimport { uploadCats as _uploadCats } from \"../../redux/kats/kats.actions\";\nimport { filterCats as _filterCats } from \"../../redux/kats/kats.actions\";\nimport { loadingCats } from \"../../redux/kats/kats.actions\";\nimport Spinner from 'react-native-loading-spinner-overlay';\nimport Modal from 'react-native-modal';\nvar styles = StyleSheet.create({\n  container: {\n    paddingTop: 50,\n    height: 750,\n    marginTop: 0\n  },\n  spinnerTextStyle: {\n    color: 'black'\n  }\n});\n\nfunction KatsOverview(_ref) {\n  var _this = this;\n\n  var uploadCats = _ref.uploadCats,\n      filterCats = _ref.filterCats,\n      navigation = _ref.navigation;\n\n  var _useState = useState([]),\n      _useState2 = _slicedToArray(_useState, 2),\n      kats = _useState2[0],\n      setKats = _useState2[1];\n\n  var _useState3 = useState([]),\n      _useState4 = _slicedToArray(_useState3, 2),\n      katFilter = _useState4[0],\n      setKatFilter = _useState4[1];\n\n  var _useState5 = useState(undefined),\n      _useState6 = _slicedToArray(_useState5, 2),\n      text = _useState6[0],\n      _onChangeText = _useState6[1];\n\n  var _useState7 = useState(false),\n      _useState8 = _slicedToArray(_useState7, 2),\n      isModalVisible = _useState8[0],\n      setModalVisible = _useState8[1];\n\n  var katsImages = useSelector(function (state) {\n    return state.kats.katsList;\n  });\n  var katsCount = useSelector(function (state) {\n    return state.kats.count;\n  });\n  var isLoading = useSelector(function (state) {\n    return state.kats.isUploading;\n  });\n  var dispatch = useDispatch();\n  var CancelToken = axios.CancelToken;\n  var source = CancelToken.source();\n  useEffect(function () {\n    getCats();\n    return function () {\n      source.cancel();\n    };\n  }, []);\n  useEffect(function () {\n    var result = _toConsumableArray(katsImages);\n\n    if (katsCount) {\n      result = result.slice(0, katsCount);\n    }\n\n    setKatFilter(result);\n  }, [katsImages, katsCount]);\n  useName(kats);\n\n  var getCats = function getCats() {\n    var catMap, maxItter, max, value, up, obj;\n    return _regeneratorRuntime.async(function getCats$(_context) {\n      while (1) {\n        switch (_context.prev = _context.next) {\n          case 0:\n            catMap = [];\n            maxItter = 100;\n            max = 16;\n            value = 0;\n            up = true;\n\n          case 5:\n            _context.prev = 5;\n            _context.next = 8;\n            return _regeneratorRuntime.awrap(axios.get(\"http://placekitten.com/200/300?image=\" + value, {\n              cancelToken: source.token\n            }).then(function (res) {\n              var cat = _extends({}, {\n                preview: res.config.url,\n                id: uuidv4()\n              });\n\n              catMap.push(cat);\n            }).catch(function (err) {\n              console.log('cannot get images');\n            }));\n\n          case 8:\n            maxItter--;\n\n            if (up == true && value <= max) {\n              value++;\n\n              if (value == max) {\n                up = false;\n              }\n            } else {\n              up = false;\n              value--;\n\n              if (value == 0) {\n                up = true;\n              }\n            }\n\n            _context.next = 16;\n            break;\n\n          case 12:\n            _context.prev = 12;\n            _context.t0 = _context[\"catch\"](5);\n            console.log(_context.t0);\n            throw _context.t0;\n\n          case 16:\n            if (maxItter > 0) {\n              _context.next = 5;\n              break;\n            }\n\n          case 17:\n            obj = kats.map(function (item, i) {\n              return _extends({}, item, catMap[i]);\n            });\n            uploadCats(obj);\n            dispatch(loadingCats());\n            setTimeout(function () {\n              console.log('aa');\n            }, 100);\n\n          case 21:\n          case \"end\":\n            return _context.stop();\n        }\n      }\n    }, null, null, [[5, 12]], Promise);\n  };\n\n  var toggleModal = function toggleModal() {\n    setModalVisible(!isModalVisible);\n  };\n\n  return React.createElement(View, {\n    style: {\n      flex: 1\n    },\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 155,\n      columnNumber: 3\n    }\n  }, React.createElement(Spinner, {\n    visible: isLoading,\n    color: 'black',\n    textContent: 'Loading...',\n    style: styles.spinnerTextStyle,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 156,\n      columnNumber: 7\n    }\n  }), React.createElement(TouchableOpacity, {\n    style: {\n      width: '20%',\n      backgroundColor: 'orange',\n      marginHorizontal: 30,\n      borderRadius: 5,\n      justifyContent: 'center',\n      alignSelf: 'center',\n      marginTop: 20\n    },\n    onPress: toggleModal,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 162,\n      columnNumber: 9\n    }\n  }, React.createElement(Text, {\n    style: {\n      color: 'white',\n      alignSelf: 'center',\n      padding: 5\n    },\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 165,\n      columnNumber: 11\n    }\n  }, \"Filter\")), React.createElement(Modal, {\n    isVisible: isModalVisible,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 168,\n      columnNumber: 9\n    }\n  }, React.createElement(View, {\n    style: {\n      flex: 1,\n      flexDirection: 'row',\n      justifyContent: 'center',\n      alignItems: 'center',\n      marginTop: 100\n    },\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 169,\n      columnNumber: 11\n    }\n  }, React.createElement(TouchableOpacity, {\n    onPress: function onPress() {\n      return filterCats(30);\n    },\n    style: {\n      width: '25%',\n      borderColor: 'white',\n      height: '20%',\n      borderWidth: 1,\n      marginHorizontal: 25,\n      borderRadius: 12\n    },\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 170,\n      columnNumber: 16\n    }\n  }, React.createElement(Text, {\n    style: {\n      color: 'white',\n      alignSelf: 'center',\n      padding: 0,\n      fontSize: 30\n    },\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 174,\n      columnNumber: 21\n    }\n  }, \"30\")), React.createElement(TouchableOpacity, {\n    onPress: function onPress() {\n      return filterCats(50);\n    },\n    style: {\n      width: '25%',\n      height: '20%',\n      borderWidth: 1,\n      borderColor: 'white',\n      marginHorizontal: 25,\n      borderRadius: 12\n    },\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 176,\n      columnNumber: 19\n    }\n  }, React.createElement(Text, {\n    style: {\n      color: 'white',\n      alignSelf: 'center',\n      padding: 0,\n      fontSize: 30\n    },\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 180,\n      columnNumber: 20\n    }\n  }, \"50\")), React.createElement(TouchableOpacity, {\n    onPress: function onPress() {\n      return filterCats(100);\n    },\n    style: {\n      width: '25%',\n      height: '20%',\n      borderColor: 'white',\n      borderWidth: 1,\n      marginHorizontal: 25,\n      borderRadius: 12\n    },\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 182,\n      columnNumber: 19\n    }\n  }, React.createElement(Text, {\n    style: {\n      color: 'white',\n      alignSelf: 'center',\n      padding: 0,\n      fontSize: 30\n    },\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 186,\n      columnNumber: 20\n    }\n  }, \"100\"))), React.createElement(View, {\n    style: {\n      flex: 1,\n      justifyContent: 'center',\n      alignItems: 'center',\n      marginBottom: 150\n    },\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 189,\n      columnNumber: 19\n    }\n  }, React.createElement(View, {\n    style: {\n      flex: 1\n    },\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 194,\n      columnNumber: 19\n    }\n  }, React.createElement(TextInput, {\n    placeholder: \"type number\",\n    placeholderTextColor: \"white\",\n    style: {\n      height: 40,\n      width: 150,\n      borderColor: 'gray',\n      borderWidth: 1,\n      color: 'white'\n    },\n    onChangeText: function onChangeText(text) {\n      _onChangeText(text);\n\n      filterCats(text);\n    },\n    value: text,\n    defaultValue: text,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 195,\n      columnNumber: 21\n    }\n  }))), React.createElement(TouchableOpacity, {\n    style: {\n      width: '30%',\n      height: 32,\n      alignSelf: 'center',\n      backgroundColor: 'orange',\n      marginHorizontal: 30,\n      borderRadius: 5\n    },\n    onPress: toggleModal,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 208,\n      columnNumber: 19\n    }\n  }, React.createElement(Text, {\n    style: {\n      color: 'white',\n      alignSelf: 'center',\n      padding: 7\n    },\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 211,\n      columnNumber: 21\n    }\n  }, \"Close\"))), React.createElement(View, {\n    style: styles.container,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 214,\n      columnNumber: 14\n    }\n  }, React.createElement(FlatList, {\n    style: {\n      flex: 1\n    },\n    data: katFilter,\n    renderItem: function renderItem(_ref2) {\n      var item = _ref2.item;\n      return React.createElement(KatsItem, {\n        item: item,\n        navigation: navigation,\n        __self: _this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 218,\n          columnNumber: 41\n        }\n      });\n    },\n    keyExtractor: function keyExtractor(item) {\n      return item.id;\n    },\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 215,\n      columnNumber: 15\n    }\n  })));\n}\n\nvar mapDispatchToProps = function mapDispatchToProps(dispatch) {\n  return {\n    uploadCats: function uploadCats(catArr) {\n      return dispatch(_uploadCats(catArr));\n    },\n    filterCats: function filterCats(count) {\n      return dispatch(_filterCats(count));\n    }\n  };\n};\n\nexport default connect(null, mapDispatchToProps)(KatsOverview);","map":{"version":3,"sources":["/Users/Justas/Desktop/kats/components/kats-overview/kats-overview.component.jsx"],"names":["React","useState","useEffect","connect","createStructuredSelector","useSelector","useDispatch","v4","uuidv4","axios","KatsItem","useName","uploadCats","filterCats","loadingCats","Spinner","Modal","styles","StyleSheet","create","container","paddingTop","height","marginTop","spinnerTextStyle","color","KatsOverview","navigation","kats","setKats","katFilter","setKatFilter","undefined","text","onChangeText","isModalVisible","setModalVisible","katsImages","state","katsList","katsCount","count","isLoading","isUploading","dispatch","CancelToken","source","getCats","cancel","result","slice","catMap","maxItter","max","value","up","get","cancelToken","token","then","res","cat","preview","config","url","id","push","catch","err","console","log","obj","map","item","i","setTimeout","toggleModal","flex","width","backgroundColor","marginHorizontal","borderRadius","justifyContent","alignSelf","padding","flexDirection","alignItems","borderColor","borderWidth","fontSize","marginBottom","mapDispatchToProps","catArr"],"mappings":";;;;;AAAA,OAAOA,KAAP,IAAeC,QAAf,EAAyBC,SAAzB,QAAyC,OAAzC;;;;;;;;AAWA,SAASC,OAAT,QAAwB,aAAxB;AACA,SAASC,wBAAT,QAAyC,UAAzC;AACA,SAASC,WAAT,EAAsBC,WAAtB,QAAyC,aAAzC;AACA,OAAO,gCAAP;AACA,SAASC,EAAE,IAAIC,MAAf,QAA6B,MAA7B;AACA,OAAOC,KAAP,MAAkB,OAAlB;AAEA,OAAOC,QAAP;AACA,SAASC,OAAT;AAEA,SAAQC,UAAU,IAAVA,WAAR;AACA,SAASC,UAAU,IAAVA,WAAT;AACA,SAASC,WAAT;AAEA,OAAOC,OAAP,MAAoB,sCAApB;AACA,OAAOC,KAAP,MAAkB,oBAAlB;AAGA,IAAMC,MAAM,GAAGC,UAAU,CAACC,MAAX,CAAkB;AAC/BC,EAAAA,SAAS,EAAE;AACTC,IAAAA,UAAU,EAAE,EADH;AAETC,IAAAA,MAAM,EAAC,GAFE;AAGTC,IAAAA,SAAS,EAAE;AAHF,GADoB;AAK5BC,EAAAA,gBAAgB,EAAE;AACnBC,IAAAA,KAAK,EAAE;AADY;AALU,CAAlB,CAAf;;AAgBA,SAASC,YAAT,OAA4D;AAAA;;AAAA,MAArCd,UAAqC,QAArCA,UAAqC;AAAA,MAAzBC,UAAyB,QAAzBA,UAAyB;AAAA,MAAbc,UAAa,QAAbA,UAAa;;AAAA,kBAElC1B,QAAQ,CAAC,EAAD,CAF0B;AAAA;AAAA,MAEnD2B,IAFmD;AAAA,MAE7CC,OAF6C;;AAAA,mBAIxB5B,QAAQ,CAAC,EAAD,CAJgB;AAAA;AAAA,MAInD6B,SAJmD;AAAA,MAIxCC,YAJwC;;AAAA,mBAM7B9B,QAAQ,CAAC+B,SAAD,CANqB;AAAA;AAAA,MAMnDC,IANmD;AAAA,MAM7CC,aAN6C;;AAAA,mBAQhBjC,QAAQ,CAAC,KAAD,CARQ;AAAA;AAAA,MAQnDkC,cARmD;AAAA,MAQnCC,eARmC;;AAW1D,MAAMC,UAAU,GAAGhC,WAAW,CAAC,UAAAiC,KAAK;AAAA,WAAIA,KAAK,CAACV,IAAN,CAAWW,QAAf;AAAA,GAAN,CAA9B;AACA,MAAMC,SAAS,GAAGnC,WAAW,CAAC,UAAAiC,KAAK;AAAA,WAAIA,KAAK,CAACV,IAAN,CAAWa,KAAf;AAAA,GAAN,CAA7B;AACA,MAAMC,SAAS,GAAGrC,WAAW,CAAC,UAAAiC,KAAK;AAAA,WAAIA,KAAK,CAACV,IAAN,CAAWe,WAAf;AAAA,GAAN,CAA7B;AAEA,MAAMC,QAAQ,GAAGtC,WAAW,EAA5B;AAEA,MAAMuC,WAAW,GAAGpC,KAAK,CAACoC,WAA1B;AACA,MAAMC,MAAM,GAAGD,WAAW,CAACC,MAAZ,EAAf;AAEA5C,EAAAA,SAAS,CAAC,YAAM;AAChB6C,IAAAA,OAAO;AACP,WAAO,YAAM;AACTD,MAAAA,MAAM,CAACE,MAAP;AACD,KAFH;AAGD,GALU,EAKR,EALQ,CAAT;AAOA9C,EAAAA,SAAS,CAAC,YAAM;AACd,QAAI+C,MAAM,sBAAOZ,UAAP,CAAV;;AAEE,QAAIG,SAAJ,EAAe;AACfS,MAAAA,MAAM,GAAGA,MAAM,CAACC,KAAP,CAAa,CAAb,EAAgBV,SAAhB,CAAT;AACC;;AACDT,IAAAA,YAAY,CAACkB,MAAD,CAAZ;AAEH,GARQ,EAQN,CAACZ,UAAD,EAAaG,SAAb,CARM,CAAT;AAYA7B,EAAAA,OAAO,CAACiB,IAAD,CAAP;;AAEA,MAAMmB,OAAO,GAAG,SAAVA,OAAU;AAAA;AAAA;AAAA;AAAA;AAAA;AAGZI,YAAAA,MAHY,GAGH,EAHG;AAIZC,YAAAA,QAJY,GAID,GAJC;AAOZC,YAAAA,GAPY,GAON,EAPM;AAQZC,YAAAA,KARY,GAQJ,CARI;AASZC,YAAAA,EATY,GASP,IATO;;AAAA;AAAA;AAAA;AAAA,6CAcV9C,KAAK,CAAC+C,GAAN,2CAAkDF,KAAlD,EAA2D;AAC/DG,cAAAA,WAAW,EAAEX,MAAM,CAACY;AAD2C,aAA3D,EAGJC,IAHI,CAGC,UAAAC,GAAG,EAAI;AACV,kBAAIC,GAAG,GAAG,SAAc,EAAd,EAAkB;AAChBC,gBAAAA,OAAO,EAAEF,GAAG,CAACG,MAAJ,CAAWC,GADJ;AAEhBC,gBAAAA,EAAE,EAAEzD,MAAM;AAFM,eAAlB,CAAV;;AAKA2C,cAAAA,MAAM,CAACe,IAAP,CAAYL,GAAZ;AACA,aAVE,EAWCM,KAXD,CAWO,UAACC,GAAD,EAAS;AACZC,cAAAA,OAAO,CAACC,GAAR,CAAY,mBAAZ;AACC,aAbL,CAdU;;AAAA;AA6BZlB,YAAAA,QAAQ;;AAER,gBAAIG,EAAE,IAAI,IAAN,IAAcD,KAAK,IAAID,GAA3B,EAAgC;AAC/BC,cAAAA,KAAK;;AAEN,kBAAIA,KAAK,IAAID,GAAb,EAAkB;AAChBE,gBAAAA,EAAE,GAAG,KAAL;AACD;AACF,aANC,MAMM;AACJA,cAAAA,EAAE,GAAG,KAAL;AACAD,cAAAA,KAAK;;AAEP,kBAAIA,KAAK,IAAI,CAAb,EAAgB;AACdC,gBAAAA,EAAE,GAAG,IAAL;AACC;AACF;;AA5CW;AAAA;;AAAA;AAAA;AAAA;AA+CZc,YAAAA,OAAO,CAACC,GAAR;AA/CY;;AAAA;AAAA,gBAmDTlB,QAAQ,GAAG,CAnDF;AAAA;AAAA;AAAA;;AAAA;AAqDVmB,YAAAA,GArDU,GAqDJ3C,IAAI,CAAC4C,GAAL,CAAS,UAACC,IAAD,EAAOC,CAAP;AAAA,qBAAa,SAAc,EAAd,EAAkBD,IAAlB,EAAwBtB,MAAM,CAACuB,CAAD,CAA9B,CAAb;AAAA,aAAT,CArDI;AAuDhB9D,YAAAA,UAAU,CAAC2D,GAAD,CAAV;AACA3B,YAAAA,QAAQ,CAAC9B,WAAW,EAAZ,CAAR;AACE6D,YAAAA,UAAU,CAAC,YAAM;AACjBN,cAAAA,OAAO,CAACC,GAAR,CAAY,IAAZ;AACD,aAFW,EAET,GAFS,CAAV;;AAzDc;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,GAAhB;;AA8DF,MAAMM,WAAW,GAAG,SAAdA,WAAc,GAAM;AACtBxC,IAAAA,eAAe,CAAC,CAACD,cAAF,CAAf;AACD,GAFH;;AAKC,SACC,oBAAC,IAAD;AAAM,IAAA,KAAK,EAAE;AAAC0C,MAAAA,IAAI,EAAC;AAAN,KAAb;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,KACI,oBAAC,OAAD;AACI,IAAA,OAAO,EAAEnC,SADb;AAEI,IAAA,KAAK,EAAE,OAFX;AAGI,IAAA,WAAW,EAAE,YAHjB;AAII,IAAA,KAAK,EAAEzB,MAAM,CAACO,gBAJlB;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,IADJ,EAOM,oBAAC,gBAAD;AACE,IAAA,KAAK,EAAE;AAACsD,MAAAA,KAAK,EAAC,KAAP;AAAcC,MAAAA,eAAe,EAAC,QAA9B;AAAwCC,MAAAA,gBAAgB,EAAC,EAAzD;AAA6DC,MAAAA,YAAY,EAAE,CAA3E;AAA8EC,MAAAA,cAAc,EAAE,QAA9F;AAAwGC,MAAAA,SAAS,EAAC,QAAlH;AAA4H5D,MAAAA,SAAS,EAAE;AAAvI,KADT;AAEE,IAAA,OAAO,EAAEqD,WAFX;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,KAGE,oBAAC,IAAD;AAAM,IAAA,KAAK,EAAE;AAACnD,MAAAA,KAAK,EAAC,OAAP;AAAgB0D,MAAAA,SAAS,EAAC,QAA1B;AAAoCC,MAAAA,OAAO,EAAC;AAA5C,KAAb;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,cAHF,CAPN,EAaM,oBAAC,KAAD;AAAO,IAAA,SAAS,EAAEjD,cAAlB;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,KACE,oBAAC,IAAD;AAAM,IAAA,KAAK,EAAE;AAAC0C,MAAAA,IAAI,EAAC,CAAN;AAASQ,MAAAA,aAAa,EAAC,KAAvB;AAA8BH,MAAAA,cAAc,EAAE,QAA9C;AAAwDI,MAAAA,UAAU,EAAE,QAApE;AAA8E/D,MAAAA,SAAS,EAAC;AAAxF,KAAb;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,KACK,oBAAC,gBAAD;AACK,IAAA,OAAO,EAAE;AAAA,aAAMV,UAAU,CAAC,EAAD,CAAhB;AAAA,KADd;AAEK,IAAA,KAAK,EAAE;AAACiE,MAAAA,KAAK,EAAC,KAAP;AAAcS,MAAAA,WAAW,EAAC,OAA1B;AAAmCjE,MAAAA,MAAM,EAAE,KAA3C;AAAkDkE,MAAAA,WAAW,EAAC,CAA9D;AAAiER,MAAAA,gBAAgB,EAAC,EAAlF;AAAsFC,MAAAA,YAAY,EAAE;AAApG,KAFZ;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,KAIK,oBAAC,IAAD;AAAM,IAAA,KAAK,EAAE;AAACxD,MAAAA,KAAK,EAAC,OAAP;AAAgB0D,MAAAA,SAAS,EAAC,QAA1B;AAAoCC,MAAAA,OAAO,EAAC,CAA5C;AAA+CK,MAAAA,QAAQ,EAAE;AAAzD,KAAb;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,UAJL,CADL,EAOQ,oBAAC,gBAAD;AACA,IAAA,OAAO,EAAE;AAAA,aAAM5E,UAAU,CAAC,EAAD,CAAhB;AAAA,KADT;AAEC,IAAA,KAAK,EAAE;AAACiE,MAAAA,KAAK,EAAC,KAAP;AAAcxD,MAAAA,MAAM,EAAE,KAAtB;AAA6BkE,MAAAA,WAAW,EAAC,CAAzC;AAA4CD,MAAAA,WAAW,EAAC,OAAxD;AAAiEP,MAAAA,gBAAgB,EAAC,EAAlF;AAAsFC,MAAAA,YAAY,EAAE;AAApG,KAFR;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,KAIC,oBAAC,IAAD;AAAM,IAAA,KAAK,EAAE;AAACxD,MAAAA,KAAK,EAAC,OAAP;AAAgB0D,MAAAA,SAAS,EAAC,QAA1B;AAAoCC,MAAAA,OAAO,EAAC,CAA5C;AAA+CK,MAAAA,QAAQ,EAAE;AAAzD,KAAb;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,UAJD,CAPR,EAaQ,oBAAC,gBAAD;AACE,IAAA,OAAO,EAAE;AAAA,aAAM5E,UAAU,CAAC,GAAD,CAAhB;AAAA,KADX;AAEC,IAAA,KAAK,EAAE;AAACiE,MAAAA,KAAK,EAAC,KAAP;AAAcxD,MAAAA,MAAM,EAAE,KAAtB;AAA6BiE,MAAAA,WAAW,EAAC,OAAzC;AAAkDC,MAAAA,WAAW,EAAC,CAA9D;AAAiER,MAAAA,gBAAgB,EAAC,EAAlF;AAAsFC,MAAAA,YAAY,EAAE;AAApG,KAFR;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,KAIC,oBAAC,IAAD;AAAM,IAAA,KAAK,EAAE;AAACxD,MAAAA,KAAK,EAAC,OAAP;AAAgB0D,MAAAA,SAAS,EAAC,QAA1B;AAAoCC,MAAAA,OAAO,EAAC,CAA5C;AAA+CK,MAAAA,QAAQ,EAAE;AAAzD,KAAb;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,WAJD,CAbR,CADF,EAqBU,oBAAC,IAAD;AAAM,IAAA,KAAK,EAAE;AAACZ,MAAAA,IAAI,EAAE,CAAP;AACXK,MAAAA,cAAc,EAAE,QADL;AAEXI,MAAAA,UAAU,EAAE,QAFD;AAGXI,MAAAA,YAAY,EAAC;AAHF,KAAb;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,KAKA,oBAAC,IAAD;AAAM,IAAA,KAAK,EAAE;AAACb,MAAAA,IAAI,EAAE;AAAP,KAAb;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,KACE,oBAAC,SAAD;AACE,IAAA,WAAW,EAAC,aADd;AAEE,IAAA,oBAAoB,EAAC,OAFvB;AAGE,IAAA,KAAK,EAAE;AAACvD,MAAAA,MAAM,EAAE,EAAT;AAAawD,MAAAA,KAAK,EAAC,GAAnB;AAAwBS,MAAAA,WAAW,EAAE,MAArC;AAA6CC,MAAAA,WAAW,EAAE,CAA1D;AAA6D/D,MAAAA,KAAK,EAAE;AAApE,KAHT;AAIE,IAAA,YAAY,EAAE,sBAACQ,IAAD,EAAU;AACtBC,MAAAA,aAAY,CAACD,IAAD,CAAZ;;AACApB,MAAAA,UAAU,CAACoB,IAAD,CAAV;AACD,KAPH;AAQE,IAAA,KAAK,EAAEA,IART;AASE,IAAA,YAAY,EAAEA,IAThB;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,IADF,CALA,CArBV,EAwCU,oBAAC,gBAAD;AACA,IAAA,KAAK,EAAE;AAAC6C,MAAAA,KAAK,EAAC,KAAP;AAAcxD,MAAAA,MAAM,EAAE,EAAtB;AAA0B6D,MAAAA,SAAS,EAAC,QAApC;AAA8CJ,MAAAA,eAAe,EAAC,QAA9D;AAAwEC,MAAAA,gBAAgB,EAAC,EAAzF;AAA6FC,MAAAA,YAAY,EAAE;AAA3G,KADP;AAEA,IAAA,OAAO,EAAEL,WAFT;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,KAGE,oBAAC,IAAD;AAAM,IAAA,KAAK,EAAE;AAACnD,MAAAA,KAAK,EAAC,OAAP;AAAgB0D,MAAAA,SAAS,EAAC,QAA1B;AAAoCC,MAAAA,OAAO,EAAC;AAA5C,KAAb;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,aAHF,CAxCV,CAbN,EA2DW,oBAAC,IAAD;AAAM,IAAA,KAAK,EAAEnE,MAAM,CAACG,SAApB;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,KACC,oBAAC,QAAD;AACE,IAAA,KAAK,EAAE;AAACyD,MAAAA,IAAI,EAAC;AAAN,KADT;AAEE,IAAA,IAAI,EAAE/C,SAFR;AAGE,IAAA,UAAU,EAAE;AAAA,UAAE2C,IAAF,SAAEA,IAAF;AAAA,aAAY,oBAAC,QAAD;AAAU,QAAA,IAAI,EAAEA,IAAhB;AAAsB,QAAA,UAAU,EAAE9C,UAAlC;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,QAAZ;AAAA,KAHd;AAIE,IAAA,YAAY,EAAE,sBAAA8C,IAAI;AAAA,aAAIA,IAAI,CAACR,EAAT;AAAA,KAJpB;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,IADD,CA3DX,CADD;AAsEA;;AAED,IAAM0B,kBAAkB,GAAG,SAArBA,kBAAqB,CAAA/C,QAAQ;AAAA,SAAK;AACtChC,IAAAA,UAAU,EAAE,oBAACgF,MAAD;AAAA,aAAYhD,QAAQ,CAAChC,WAAU,CAACgF,MAAD,CAAX,CAApB;AAAA,KAD0B;AAEtC/E,IAAAA,UAAU,EAAE,oBAAC4B,KAAD;AAAA,aAAWG,QAAQ,CAAC/B,WAAU,CAAC4B,KAAD,CAAX,CAAnB;AAAA;AAF0B,GAAL;AAAA,CAAnC;;AAKA,eAAetC,OAAO,CAAC,IAAD,EAAOwF,kBAAP,CAAP,CAAkCjE,YAAlC,CAAf","sourcesContent":["import React, {useState, useEffect} from 'react'\nimport { \n  Button, \n  View, \n  StyleSheet, \n  Text, \n  FlatList, \n  TouchableOpacity, \n  TextInput \n} from 'react-native';\n\nimport { connect } from 'react-redux';\nimport { createStructuredSelector } from 'reselect';\nimport { useSelector, useDispatch } from \"react-redux\";\nimport 'react-native-get-random-values'\nimport { v4 as uuidv4 } from 'uuid';\nimport axios from \"axios\";\n\nimport KatsItem from '../kats-item/kats-item.component'\nimport { useName } from '../../hooks/useName.jsx'\n\nimport {uploadCats} from '../../redux/kats/kats.actions';\nimport { filterCats } from '../../redux/kats/kats.actions'\nimport { loadingCats } from '../../redux/kats/kats.actions'\n\nimport Spinner from 'react-native-loading-spinner-overlay';\nimport Modal from 'react-native-modal';\n\n\nconst styles = StyleSheet.create({\n  container: {\n    paddingTop: 50,\n    height:750,\n    marginTop: 0\n  }, spinnerTextStyle: {\n    color: 'black'\n  }\n});\n\n//await all\n\n//implementing asyncstorage\n\n//If there are no internet connection user should see message with relevant information (it could be modal popup or text element in empty kitten list), for example “Couldn't connect to the internet”.\n\nfunction KatsOverview({uploadCats, filterCats, navigation}) {\n\n  const [kats, setKats] = useState([])\n\n  const [katFilter, setKatFilter] = useState([])\n\n  const [text, onChangeText] = useState(undefined);\n\n  const [isModalVisible, setModalVisible] = useState(false);\n\n\n  const katsImages = useSelector(state => state.kats.katsList)\n  const katsCount = useSelector(state => state.kats.count)\n  const isLoading = useSelector(state => state.kats.isUploading)\n\n  const dispatch = useDispatch();\n\n  const CancelToken = axios.CancelToken;\n  const source = CancelToken.source();\n\n  useEffect(() => {\n  getCats();\n  return () => {\n      source.cancel();\n    }\n}, [])\n\n  useEffect(() => {\n    let result = [...katsImages];\n\n      if (katsCount) {\n      result = result.slice(0, katsCount)\n      }\n      setKatFilter(result);\n\n  }, [katsImages, katsCount])\n\n\n  //getting names\n  useName(kats);\n\n  const getCats = async () => {\n\n  // getting cats\n  let catMap = [];\n  let maxItter = 100;\n\n  //random images\n  let max = 16\n  let value = 0\n  let up = true\n\n  do {\n    try {\n\n  await axios.get(`http://placekitten.com/200/300?image=${value}`, {\n    cancelToken: source.token\n  })\n   .then(res => {\n      let cat = Object.assign({}, {\n                  preview: res.config.url,\n                  id: uuidv4(),\n              }\n        )\n      catMap.push(cat)\n     })\n        .catch((err) => {\n            console.log('cannot get images')\n            });\n\n      maxItter--\n\n      if (up == true && value <= max) {\n       value++\n\n      if (value == max) {\n        up = false;\n      }\n    }  else {\n        up = false\n        value--;\n\n      if (value == 0) {\n        up = true;\n        }\n      }\n      \n    } catch (error) {\n      console.log(error)\n      throw error;\n    }\n  }\n  while (maxItter > 0);\n\n  const obj = kats.map((item, i) => Object.assign({}, item, catMap[i]))\n\n  uploadCats(obj);\n  dispatch(loadingCats());\n    setTimeout(() => {\n    console.log('aa')\n  }, 100);\n}\n\nconst toggleModal = () => {\n    setModalVisible(!isModalVisible);\n  };\n\n\n\treturn (\n\t\t<View style={{flex:1}}>\n      <Spinner\n          visible={isLoading}\n          color={'black'}\n          textContent={'Loading...'}\n          style={styles.spinnerTextStyle}\n        />\n        <TouchableOpacity \n          style={{width:'20%', backgroundColor:'orange', marginHorizontal:30, borderRadius: 5, justifyContent: 'center', alignSelf:'center', marginTop: 20}}\n          onPress={toggleModal}>\n          <Text style={{color:'white', alignSelf:'center', padding:5}}>Filter</Text>\n        </TouchableOpacity>\n\n        <Modal isVisible={isModalVisible}>\n          <View style={{flex:1, flexDirection:'row', justifyContent: 'center', alignItems: 'center', marginTop:100}}>     \n               <TouchableOpacity\n                    onPress={() => filterCats(30)}\n                    style={{width:'25%', borderColor:'white', height: '20%', borderWidth:1, marginHorizontal:25, borderRadius: 12,}}\n                  >\n                    <Text style={{color:'white', alignSelf:'center', padding:0, fontSize: 30,}}>30</Text>\n                </TouchableOpacity>\n                  <TouchableOpacity\n                  onPress={() => filterCats(50)}\n                   style={{width:'25%', height: '20%', borderWidth:1, borderColor:'white', marginHorizontal:25, borderRadius: 12,}}\n                    >\n                   <Text style={{color:'white', alignSelf:'center', padding:0, fontSize: 30,}}>50</Text>\n                  </TouchableOpacity>\n                  <TouchableOpacity\n                    onPress={() => filterCats(100)}\n                   style={{width:'25%', height: '20%', borderColor:'white', borderWidth:1, marginHorizontal:25, borderRadius: 12,}}\n                    >\n                   <Text style={{color:'white', alignSelf:'center', padding:0, fontSize: 30,}}>100</Text>\n                  </TouchableOpacity>\n                  </View>\n                  <View style={{flex: 1,\n                    justifyContent: 'center',\n                    alignItems: 'center',\n                    marginBottom:150,\n                  }}>\n                  <View style={{flex: 1,}}>\n                    <TextInput\n                      placeholder='type number'\n                      placeholderTextColor=\"white\"\n                      style={{height: 40, width:150, borderColor: 'gray', borderWidth: 1, color: 'white'}}\n                      onChangeText={(text) => {\n                        onChangeText(text);\n                        filterCats(text)\n                      }}\n                      value={text}\n                      defaultValue={text}\n                    />\n                  </View>\n                    </View>\n                  <TouchableOpacity \n                  style={{width:'30%', height: 32, alignSelf:'center', backgroundColor:'orange', marginHorizontal:30, borderRadius: 5,}}\n                  onPress={toggleModal}>\n                    <Text style={{color:'white', alignSelf:'center', padding:7}}>Close</Text>\n                  </TouchableOpacity>\n          </Modal>\n             <View style={styles.container}>\n              <FlatList\n                style={{flex:1}}\n                data={katFilter}\n                renderItem={({item}) => <KatsItem item={item} navigation={navigation}/>}\n                keyExtractor={item => item.id}\n              />\n          \t</View>\n      </View>\n\t\t)\n}\n\nconst mapDispatchToProps = dispatch => ({\n  uploadCats: (catArr) => dispatch(uploadCats(catArr)),\n  filterCats: (count) => dispatch(filterCats(count))\n})\n\nexport default connect(null, mapDispatchToProps)(KatsOverview);\n"]},"metadata":{},"sourceType":"module"}